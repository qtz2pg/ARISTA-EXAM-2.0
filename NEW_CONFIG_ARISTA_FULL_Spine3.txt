! Host and management details
hostname spine3
ip routing

! Loopback interfaces
interface Loopback0
  ip address 10.100.100.3/32

! Routed links to leafs
interface Ethernet1
  no switchport
  ip address 10.10.3.1/30
  ip ospf network point-to-point
  no shutdown

interface Ethernet2
  no switchport
  ip address 10.10.3.5/30
  ip ospf network point-to-point
  no shutdown

interface Ethernet3
  no switchport
  ip address 10.10.3.9/30
  ip ospf network point-to-point
  no shutdown

interface Ethernet4
  no switchport
  ip address 10.10.3.13/30
  ip ospf network point-to-point
  no shutdown

! OSPF configuration
router ospf 1
  router-id 10.100.100.3
  network 10.100.100.3/32 area 0.0.0.0
  network 10.10.3.1/30 area 0
  network 10.10.3.5/30 area 0
  network 10.10.3.9/30 area 0
  network 10.10.3.13/30 area 0
  passive-interface default
  no passive-interface Ethernet1
  no passive-interface Ethernet2
  no passive-interface Ethernet3
  no passive-interface Ethernet4

! BGP configuration
router bgp 65100
  router-id 10.100.100.3
  maximum-paths 4 ecmp 4
  neighbor LEAFS peer group
  neighbor LEAFS remote-as 65001
  neighbor LEAFS update-source Loopback0
  neighbor 10.10.3.2 peer group LEAFS
  neighbor 10.10.3.2 description Leaf1
  neighbor 10.10.3.2 remote-as 65001
  neighbor 10.10.3.6 peer group LEAFS
  neighbor 10.10.3.6 description Leaf2
  neighbor 10.10.3.6 remote-as 65002
  neighbor 10.10.3.10 peer group LEAFS
  neighbor 10.10.3.10 description Leaf3
  neighbor 10.10.3.10 remote-as 65003
  neighbor 10.10.3.14 peer group LEAFS
  neighbor 10.10.3.14 description Leaf4
  neighbor 10.10.3.14 remote-as 65004
  network 10.100.100.3/32
  redistribute connected

! Spanning tree configuration
spanning-tree mode mstp

! Optional: Management, NTP, SNMP, security, etc.

end